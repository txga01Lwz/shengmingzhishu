<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¬å¿ƒæ ¼çˆ±ç”Ÿå‘½ä¹‹æ ‘ - æƒ…ç»ªè‡ªæŸ¥å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .progress-bar {
            display: flex;
            justify-content: center;
            padding: 20px;
            background: #f8f9fa;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #999;
            transition: all 0.3s;
        }
        
        .step-indicator.active {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        
        .step-indicator.completed {
            background: #48bb78;
            color: white;
        }
        
        .content {
            padding: 30px;
            min-height: 400px;
        }
        
        .step-title {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .step-desc {
            color: #666;
            margin-bottom: 25px;
            font-size: 14px;
            line-height: 1.6;
            padding: 12px;
            background: #f0f4ff;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .category-section {
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .category-header {
            background: #f8f9fa;
            padding: 15px 20px;
            font-weight: 600;
            color: #5d4e37;
            font-size: 16px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 0;
        }
        
        .item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            border-right: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .item:hover {
            background: #f8f9ff;
        }
        
        .item.selected {
            background: #667eea;
            color: white;
        }
        
        .item-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid currentColor;
            border-radius: 4px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .item.selected .item-checkbox::after {
            content: 'âœ“';
            font-weight: bold;
        }
        
        .item-text {
            flex: 1;
            line-height: 1.4;
        }
        
        .single-select .item-checkbox {
            border-radius: 50%;
        }
        
        .single-select .item.selected .item-checkbox::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
            border-top: 1px solid #eee;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .selection-summary {
            background: #e8f5e9;
            border: 1px solid #81c784;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #2e7d32;
        }
        
        /* ä¼˜åŒ–åçš„æŠ¥å‘Šæ ·å¼ - å•å±æ˜¾ç¤º */
        .report-container {
            background: linear-gradient(135deg, #faf8f5 0%, #f5f0e8 100%);
            border-radius: 15px;
            padding: 20px;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .report-header-compact {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e0d5c5;
        }
        
        .report-title-main {
            font-size: 20px;
            color: #5d4e37;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .report-subtitle {
            color: #8b7355;
            font-size: 12px;
        }
        
        /* è·¯å¾„æµç¨‹å›¾æ ·å¼ */
        .path-flow {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .path-step {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            background: white;
            border-radius: 10px;
            padding: 10px 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            position: relative;
        }
        
        .path-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .path-icon.sky { background: #e3f2fd; }
        .path-icon.crown { background: #e8f5e9; }
        .path-icon.trunk { background: #fff3e0; }
        .path-icon.root { background: #fce4ec; }
        .path-icon.soil { background: #efebe9; }
        
        .path-content {
            flex: 1;
            min-width: 0;
        }
        
        .path-label {
            font-size: 11px;
            color: #8b7355;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 2px;
        }
        
        .path-items {
            font-size: 13px;
            color: #5d4e37;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .path-arrow-down {
            text-align: center;
            color: #c9b896;
            font-size: 20px;
            line-height: 1;
            margin: -4px 0;
            position: relative;
            z-index: 1;
        }
        
        .path-arrow-down::before {
            content: 'â†“';
            background: #faf8f5;
            padding: 0 10px;
        }
        
        /* åº•éƒ¨å’¨è¯¢åŒºåŸŸ */
        .consult-section {
            margin-top: 15px;
            background: white;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 2px dashed #c9b896;
        }
        
        .consult-title {
            font-size: 14px;
            color: #5d4e37;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .consult-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .qr-placeholder {
            width: 80px;
            height: 80px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #999;
            border: 1px dashed #ccc;
            flex-shrink: 0;
        }
        
        .qr-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .consult-info {
            text-align: left;
            font-size: 13px;
            color: #666;
            line-height: 1.6;
        }
        
        .consult-info strong {
            color: #667eea;
            font-size: 16px;
        }
        
        .consult-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 13px;
            margin-top: 8px;
            display: inline-block;
        }
        
        /* é‡‘å¥ Footer */
        .report-footer-compact {
            margin-top: 12px;
            text-align: center;
            padding: 12px;
            background: #5d4e37;
            color: #f5f0e8;
            border-radius: 10px;
            font-size: 12px;
            line-height: 1.5;
        }
        
        .screenshot-tip {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 13px;
        }
        
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 600px) {
            body { padding: 10px; }
            .content { padding: 15px; }
            .report-container { padding: 15px; }
            .path-step { padding: 8px 10px; }
            .path-icon { width: 28px; height: 28px; font-size: 14px; }
            .path-items { font-size: 12px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ³ å¬å¿ƒæ ¼çˆ±ç”Ÿå‘½ä¹‹æ ‘</h1>
            <p>çœ‹è§è‡ªå·±çš„å¿ƒ Â· ä¸€å¼ å¸®ä½ è¯»æ‡‚æƒ…ç»ªã€èµ°å›å†…å¿ƒçš„åœ°å›¾</p>
        </div>
        
        <div class="progress-bar" id="progressBar">
            <div class="step-indicator active" data-step="0">1</div>
            <div class="step-indicator" data-step="1">2</div>
            <div class="step-indicator" data-step="2">3</div>
            <div class="step-indicator" data-step="3">4</div>
            <div class="step-indicator" data-step="4">5</div>
            <div class="step-indicator" data-step="5">6</div>
            <div class="step-indicator" data-step="6">7</div>
        </div>
        
        <div class="content" id="content"></div>
    </div>

    <script>
        const steps = [
            {
                id: 'info',
                title: 'ğŸ“ åŸºæœ¬ä¿¡æ¯',
                desc: 'è¯·å¡«å†™æ‚¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œè¿™å°†å‡ºç°åœ¨æ‚¨çš„ä¸ªäººæŠ¥å‘Šä¸­',
                type: 'form',
                fields: [
                    { id: 'name', label: 'æ‚¨çš„ç§°å‘¼', placeholder: 'ä¾‹å¦‚ï¼šå°æ˜', required: true },
                    { id: 'phone', label: 'è”ç³»ç”µè¯', placeholder: 'ç”¨äºæ ‡è¯†æ‚¨çš„æŠ¥å‘Š', required: true }
                ]
            },
            {
                id: 'sky',
                title: 'ğŸŒ¤ï¸ å¤©ç©º - å‘ç”Ÿäº†ä»€ä¹ˆäº‹',
                desc: 'ã€å•é€‰ã€‘è¯·é€‰æ‹©ä¸€ä»¶æœ€è¿‘è®©æ‚¨æƒ…ç»ªæ³¢åŠ¨æœ€å¼ºçƒˆçš„å…·ä½“äº‹ä»¶ï¼š',
                type: 'single',
                categories: [
                    { name: 'æ„Ÿæƒ…å…³ç³»ç±»', items: ['å¯¹æ–¹å†·æ·¡', 'ä¸å›æ¶ˆæ¯', 'å›å¾—æ•·è¡', 'æ€åº¦å˜äº†', 'ä¸è§£é‡Š', 'ä¸è€çƒ¦', 'å’Œåˆ«äººèµ°å¾—è¿‘', 'å‡ºç°å¼‚æ€§', 'æš§æ˜§', 'éšç’äº‹æƒ…', 'è¯´è°', 'åµæ¶', 'å†·æˆ˜', 'è¢«å¿½ç•¥', 'è¢«æ¯”è¾ƒ', 'è¢«å«Œå¼ƒ', 'ä¸é™ªæˆ‘', 'ä¸è¢«ä¼˜å…ˆé€‰æ‹©', 'è¢«æ”¾åœ¨åé¢'] },
                    { name: 'ç°å®å·¥ä½œé‡‘é’±ç±»', items: ['æ²¡é’±', 'è´Ÿå€º', 'æ”¶å…¥ä¸‹é™', 'å·¥ä½œä¸é¡º', 'è¢«æ‰¹è¯„', 'è¢«å¦å®šèƒ½åŠ›', 'è¢«è£å‘˜', 'å‡èŒå¤±è´¥', 'é¡¹ç›®å¤±è´¥', 'å‹åŠ›å¤§', 'è¢«å–ä»£', 'æ²¡å‰é€”æ„Ÿ', 'åšå¾—å†å¤šä¹Ÿæ²¡äººçœ‹è§', 'åŠªåŠ›æ²¡å›æŠ¥', 'ç ´äº§'] },
                    { name: 'å®¶åº­æˆé•¿ç±»', items: ['çˆ¶æ¯ä¸ç†è§£', 'è¢«ç®¡å¤ªå¤š', 'è¢«å¦å®š', 'è¢«æ‰“å‹', 'åå¿ƒåˆ«äºº', 'è¦æ±‚å¤ªé«˜', 'ä¸è¢«å°Šé‡', 'ä¸è¢«æ”¯æŒ', 'ä¸è¢«å€¾å¬', 'è¢«æ§åˆ¶', 'æ— æ³•è‡ªä¸»'] },
                    { name: 'èº«ä½“ç”Ÿæ´»çŠ¶æ€ç±»', items: ['ç´§å¼ ', 'å¼ºè¿«ç—‡', 'åŒé£Ÿç—‡', 'ç”Ÿç—…', 'ä½“åŠ›å˜å·®', 'çŠ¶æ€ä¸å¥½', 'å˜èƒ–å˜è€', 'å¤–è²Œå˜åŒ–', 'å®¹æ˜“ç´¯', 'å¤±çœ ', 'èº«ä½“é€æ”¯'] },
                    { name: 'ç†æƒ³ç°å®è½å·®ç±»', items: ['æ¢¦æƒ³æ²¡å®ç°', 'æ´»æˆä¸æƒ³è¦çš„æ ·å­', 'å’Œåˆ«äººå·®è·å˜å¤§', 'è¶Šæ¥è¶Šæ™®é€š', 'å¹´çºªç„¦è™‘', 'æ²¡æ–¹å‘', 'è¿·èŒ«', 'æ²¡æœ‰æˆå°±æ„Ÿ'] }
                ]
            },
            {
                id: 'crown',
                title: 'ğŸŒ³ æ ‘å†  - ä¸‹æ„è¯†åšäº†ä»€ä¹ˆ',
                desc: 'ã€å¯å¤šé€‰ã€‘è¯·é€‰æ‹©æ‚¨å½“æ—¶å‡ ä¹æ¥ä¸åŠæ€è€ƒå°±åšå‡ºæ¥çš„ååº”ï¼š',
                type: 'multiple',
                categories: [
                    { name: 'æ§åˆ¶å‹ååº”', items: ['ä¸åœè¿½é—®', 'åå¤ç¡®è®¤', 'æŸ¥æ‰‹æœº', 'ç›¯ç€å¯¹æ–¹', 'ä¸€å®šè¦è¯´æ¸…æ¥š', 'éè¦ç­”æ¡ˆ', 'ä¸è®©å¯¹æ–¹èº²'] },
                    { name: 'è®¨å¥½å‹ååº”', items: ['å¿ç€ä¸è¯´', 'å§”å±ˆè‡ªå·±', 'å‡è£…æ²¡äº‹', 'ä¸€ç›´è®©æ­¥', 'ä»€ä¹ˆéƒ½ç­”åº”', 'ä¸æ•¢æè¦æ±‚', 'è¿‡åº¦ä»˜å‡º', 'æ€•æƒ¹äº‹'] },
                    { name: 'å›é¿å‹ååº”', items: ['æ²‰é»˜', 'è£…æ²¡äº‹', 'æ¶ˆå¤±', 'å†·å¤„ç†', 'ä¸è§£é‡Š', 'é€ƒé¿è¯é¢˜', 'ä¸å›åº”', 'åˆ‡æ–­è”ç³»'] },
                    { name: 'æ”»å‡»å‹ååº”', items: ['é˜´é˜³æ€ªæ°”', 'è®½åˆº', 'æŒ‡è´£', 'åµæ¶', 'ç¿»æ—§è´¦', 'å‘è„¾æ°”', 'è¯´ç‹ è¯', 'å†·æš´åŠ›'] },
                    { name: 'è¯æ˜å‹ååº”', items: ['æ‹¼å‘½è§£é‡Š', 'äº‰å¯¹é”™', 'ä¸æœè½¯', 'è®²é“ç†', 'åšæŒè‡ªå·±æ²¡é”™', 'åå¤è¾©è§£'] },
                    { name: 'å†…è€—å‹ååº”', items: ['åå¤æƒ³', 'éª‚è‡ªå·±', 'åæ‚”', 'çº ç»“', 'è„‘è¡¥', 'ç¡ä¸ç€', 'æ¶ˆè€—è‡ªå·±', 'åå¤å¤ç›˜'] }
                ]
            },
            {
                id: 'trunk',
                title: 'ğŸªµ æ ‘å¹² - å¿ƒé‡Œçš„çœŸå®æ„Ÿå—',
                desc: 'ã€å¯å¤šé€‰ã€‘è¯·é€‰æ‹©æ‚¨å†…å¿ƒçœŸæ­£çš„æƒ…ç»ªå’Œå¿ƒç†æ„Ÿå—ï¼š',
                type: 'multiple',
                categories: [
                    { name: 'ä¸å®‰å®³æ€•ç±»', items: ['å¿ƒæ…Œ', 'ä¸è¸å®', 'å®³æ€•', 'ç´§å¼ ', 'æ‹…å¿ƒ', 'æ²¡å®‰å…¨æ„Ÿ', 'æ€•å¤±å»', 'ææ…Œ', 'ç„¦è™‘'] },
                    { name: 'å§”å±ˆå¤±è½ç±»', items: ['å§”å±ˆ', 'éš¾è¿‡', 'å¤±æœ›', 'å­¤ç‹¬', 'ç©ºè™š', 'è¢«å¿½è§†', 'è¢«æŠ›ä¸‹æ„Ÿ', 'æ— åŠ©'] },
                    { name: 'ç”Ÿæ°”ä¸æ»¡ç±»', items: ['ç”Ÿæ°”', 'çƒ¦', 'æ†‹å±ˆ', 'ä¸çˆ½', 'æ€¨', 'ç«å¤§', 'è¢«å†’çŠ¯', 'ä¸å…¬å¹³æ„Ÿ'] },
                    { name: 'å¦å®šè‡ªå·±ç±»', items: ['è‡ªå‘', 'è§‰å¾—è‡ªå·±æ²¡ç”¨', 'è§‰å¾—è‡ªå·±å¾ˆå·®', 'æ€€ç–‘è‡ªå·±', 'æ²¡ä»·å€¼æ„Ÿ', 'è§‰å¾—é…ä¸ä¸Š', 'ç¾æ„§', 'è‡ªè´£'] },
                    { name: 'èº«ä½“ååº”ç±»', items: ['å¤±çœ ', 'å¿ƒç´¯', 'æ²¡åŠ›æ°”', 'èƒƒä¸èˆ’æœ', 'å¤´ç–¼', 'èƒ¸é—·', 'æä¸èµ·ç²¾ç¥', 'æƒ…ç»ªä½è½'] }
                ]
            },
            {
                id: 'root',
                title: 'ğŸŒ± æ ‘æ ¹ - çœŸæ­£æƒ³è¦ä»€ä¹ˆ',
                desc: 'ã€å¯å¤šé€‰ã€‘è¯·é€‰æ‹©æ‚¨æƒ…ç»ªèƒŒåçš„çœŸå®éœ€æ±‚ï¼š',
                type: 'multiple',
                categories: [
                    { name: 'å®‰å…¨æ„Ÿéœ€æ±‚', items: ['æƒ³ç¡®å®šä½ ä¸ä¼šèµ°', 'æƒ³å®‰å¿ƒ', 'æƒ³ç¨³å®š', 'ä¸æƒ³è¢«æŠ›å¼ƒ', 'ä¸æƒ³å†å—ä¼¤', 'æƒ³æœ‰ä¾é '] },
                    { name: 'è¢«çˆ±éœ€æ±‚', items: ['æƒ³è¢«çæƒœ', 'è¢«åœ¨ä¹', 'æƒ³è¢«é€‰æ‹©', 'æƒ³è¢«æ”¾ç¬¬ä¸€', 'æƒ³è¢«ç–¼', 'æƒ³è¢«åçˆ±'] },
                    { name: 'è¢«ç†è§£éœ€æ±‚', items: ['è¢«å¬è§', 'è¢«æ‡‚', 'è¢«å…±æƒ…', 'æƒ³æœ‰äººç«™åœ¨æˆ‘è¿™è¾¹', 'æƒ³è¢«è®¤çœŸå¯¹å¾…'] },
                    { name: 'è¢«è®¤å¯éœ€æ±‚', items: ['æƒ³è¢«è‚¯å®š', 'è¢«å¤¸', 'è¢«æ‰¿è®¤ä»·å€¼', 'è¢«å°Šé‡', 'è¢«çœ‹è§åŠªåŠ›', 'è¢«éœ€è¦'] },
                    { name: 'ä½ç½®æ„Ÿéœ€æ±‚', items: ['æˆ‘é‡è¦å—', 'æˆ‘ç®—ä»€ä¹ˆ', 'æˆ‘æ’ç¬¬å‡ ', 'æˆ‘æœ‰æ²¡æœ‰åœ°ä½', 'æœ‰æ²¡æœ‰åˆ†é‡', 'æˆ‘æ˜¯ä¸æ˜¯å¯æœ‰å¯æ— '] },
                    { name: 'æŒæ§æ„Ÿéœ€æ±‚', items: ['ä¸æƒ³å¤±æ§', 'ä¸æƒ³è¢«æ‘†å¸ƒ', 'æƒ³æŒæ¡ä¸»åŠ¨', 'æœ‰è¾¹ç•Œ', 'æƒ³æœ‰é€‰æ‹©æƒ'] },
                    { name: 'å­˜åœ¨æ„Ÿéœ€æ±‚', items: ['æˆ‘æ˜¯ä¸æ˜¯æœ‰æ„ä¹‰', 'æˆ‘æ˜¯ä¸æ˜¯è¢«è®°å¾—', 'æˆ‘æ˜¯ä¸æ˜¯é‡è¦çš„äºº'] }
                ]
            },
            {
                id: 'soil',
                title: 'ğŸª¨ åœŸå£¤ - è§‚å¿µçš„æ¥æº',
                desc: 'ã€å¯å¤šé€‰ã€‘è¯·é€‰æ‹©å½¢æˆæ‚¨ç°åœ¨æ¨¡å¼çš„æˆé•¿èƒŒæ™¯ï¼š',
                type: 'multiple',
                categories: [
                    { name: 'å®¶åº­ç»å†', items: ['çˆ¶æ¯å†·æ¼ ', 'çˆ±æ‰“å‹', 'è¦æ±‚é«˜', 'å¾ˆå°‘å¤¸äºº', 'åå¿ƒ', 'æ§åˆ¶å¼º', 'æƒ…ç»ªä¸ç¨³å®š', 'ç¼ºä¹é™ªä¼´', 'å¿½è§†æƒ…ç»ª'] },
                    { name: 'æ„Ÿæƒ…ç»å†', items: ['è¢«ç”©è¿‡', 'èƒŒå›', 'å¿½ç•¥', 'éª—è¿‡', 'ä¼¤å¾ˆæ·±', 'æ¯”è¾ƒ', 'æ›¿ä»£', 'è¢«æ”¾å¼ƒ'] },
                    { name: 'æˆé•¿ç»å†', items: ['å¸¸è¢«å¦å®š', 'å¸¸è¢«æ¯”è¾ƒ', 'è¦æ‡‚äº‹', 'è¦å¬è¯', 'è¦äº‰æ°”', 'ä¸èƒ½ä¸¢è„¸', 'ä¸èƒ½çŠ¯é”™', 'ä¸èƒ½å¤±è´¥'] },
                    { name: 'é•¿æœŸçŠ¶æ€', items: ['é•¿æœŸå§”å±ˆ', 'å‹æŠ‘', 'è®¨å¥½', 'ç‹¬æ‰›', 'æ²¡äººæ‡‚', 'ç¼ºçˆ±', 'é•¿æœŸå­¤ç‹¬'] },
                    { name: 'ç¯å¢ƒå½±å“', items: ['ç«äº‰', 'å‹åŠ›å¤§', 'ç¼ºä¹å®‰å…¨', 'èµ„æºåŒ®ä¹', 'æ”¯æŒå¼±', 'æƒ…ç»ªä¸è¢«é‡è§†'] },
                    { name: 'æ–‡åŒ–è§‚å¿µå½±å“', items: ['è¦ä¼˜ç§€æ‰æœ‰ä»·å€¼', 'è¦æˆåŠŸæ‰è¢«å°Šé‡', 'ä¸èƒ½ç¤ºå¼±', 'ä¸èƒ½å¤±è´¥', 'æƒ…ç»ªæ˜¯æ²¡ç”¨çš„'] }
                ]
            }
        ];

        let currentStep = 0;
        let userData = { name: '', phone: '', answers: {} };

        function renderStep() {
            const step = steps[currentStep];
            const content = document.getElementById('content');
            
            document.querySelectorAll('.step-indicator').forEach((ind, idx) => {
                ind.classList.remove('active', 'completed');
                if (idx < currentStep) ind.classList.add('completed');
                else if (idx === currentStep) ind.classList.add('active');
            });

            let html = `<div class="fade-in"><h2 class="step-title">${step.title}</h2><p class="step-desc">${step.desc}</p>`;

            if (step.type === 'form') {
                html += `<div style="max-width: 400px; margin: 0 auto;">`;
                step.fields.forEach(field => {
                    const value = userData[field.id] || '';
                    html += `<div class="input-group"><label>${field.label}${field.required ? ' *' : ''}</label><input type="text" id="${field.id}" value="${value}" placeholder="${field.placeholder}" onchange="updateFormData('${field.id}', this.value)"></div>`;
                });
                html += `</div>`;
            } else {
                const currentSelection = userData.answers[step.id] || [];
                if (currentSelection.length > 0) {
                    html += `<div class="selection-summary"><strong>å·²é€‰æ‹© ${currentSelection.length} é¡¹ï¼š</strong>${currentSelection.join('ã€')}</div>`;
                }

                const selectClass = step.type === 'single' ? 'single-select' : '';
                html += `<div class="${selectClass}">`;
                
                step.categories.forEach(cat => {
                    html += `<div class="category-section"><div class="category-header">${cat.name}</div><div class="items-grid">`;
                    cat.items.forEach(item => {
                        const isSelected = currentSelection.includes(item);
                        html += `<div class="item ${isSelected ? 'selected' : ''}" onclick="toggleItem('${step.id}', '${item}', '${step.type}', '${cat.name}')"><div class="item-checkbox"></div><div class="item-text">${item}</div></div>`;
                    });
                    html += `</div></div>`;
                });
                html += `</div>`;
            }

            html += `<div class="btn-group">`;
            if (currentStep > 0) html += `<button class="btn btn-secondary" onclick="prevStep()">â† ä¸Šä¸€æ­¥</button>`;
            else html += `<div></div>`;
            
            const isLast = currentStep === steps.length - 1;
            const btnText = isLast ? 'ç”ŸæˆæŠ¥å‘Š â†’' : 'ä¸‹ä¸€æ­¥ â†’';
            const btnAction = isLast ? 'generateReport()' : 'nextStep()';
            let canProceed = false;
            if (step.type === 'form') canProceed = userData.name && userData.phone;
            else if (step.type === 'single') canProceed = (userData.answers[step.id] || []).length === 1;
            else canProceed = (userData.answers[step.id] || []).length > 0;
            
            html += `<button class="btn btn-primary" onclick="${btnAction}" ${!canProceed ? 'disabled' : ''}>${btnText}</button></div></div>`;
            content.innerHTML = html;
        }

        function updateFormData(field, value) {
            userData[field] = value.trim();
            renderStep();
        }

        function toggleItem(stepId, item, type, categoryName) {
            if (!userData.answers[stepId]) userData.answers[stepId] = [];
            const current = userData.answers[stepId];
            
            if (type === 'single') {
                userData.answers[stepId] = [item];
                userData.answers[stepId + '_category'] = categoryName;
            } else {
                const index = current.indexOf(item);
                if (index > -1) current.splice(index, 1);
                else current.push(item);
            }
            renderStep();
        }

        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                renderStep();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
            }
        }

        function generateReport() {
            const content = document.getElementById('content');
            const date = new Date().toLocaleDateString('zh-CN');
            
            const skyItem = userData.answers.sky[0];
            const skyCategory = userData.answers.sky_category;
            const crownItems = userData.answers.crown || [];
            const trunkItems = userData.answers.trunk || [];
            const rootItems = userData.answers.root || [];
            const soilItems = userData.answers.soil || [];

            const html = `
                <div class="fade-in">
                    <div class="screenshot-tip">ğŸ“¸ è¯·æˆªå›¾ä¿å­˜æ­¤æŠ¥å‘Š Â· åŒ…å«æ‚¨çš„å®Œæ•´æƒ…ç»ªè·¯å¾„</div>
                    
                    <div class="report-container">
                        <div class="report-header-compact">
                            <div class="report-title-main">ğŸŒ³ ${userData.name}çš„ç”Ÿå‘½ä¹‹æ ‘</div>
                            <div class="report-subtitle">å¬å¿ƒæ ¼çˆ± Â· ${date}</div>
                        </div>
                        
                        <div class="path-flow">
                            <div class="path-step">
                                <div class="path-icon sky">ğŸŒ¤ï¸</div>
                                <div class="path-content">
                                    <div class="path-label">å¤©ç©º Â· è§¦å‘äº‹ä»¶</div>
                                    <div class="path-items"><strong>${skyCategory}</strong> Â· ${skyItem}</div>
                                </div>
                            </div>
                            
                            <div class="path-arrow-down"></div>
                            
                            <div class="path-step">
                                <div class="path-icon crown">ğŸŒ³</div>
                                <div class="path-content">
                                    <div class="path-label">æ ‘å†  Â· è‡ªåŠ¨ååº”</div>
                                    <div class="path-items">${crownItems.slice(0, 4).join('ã€')}${crownItems.length > 4 ? ' ç­‰' + crownItems.length + 'é¡¹' : ''}</div>
                                </div>
                            </div>
                            
                            <div class="path-arrow-down"></div>
                            
                            <div class="path-step">
                                <div class="path-icon trunk">ğŸªµ</div>
                                <div class="path-content">
                                    <div class="path-label">æ ‘å¹² Â· çœŸå®æ„Ÿå—</div>
                                    <div class="path-items">${trunkItems.slice(0, 4).join('ã€')}${trunkItems.length > 4 ? ' ç­‰' + trunkItems.length + 'é¡¹' : ''}</div>
                                </div>
                            </div>
                            
                            <div class="path-arrow-down"></div>
                            
                            <div class="path-step">
                                <div class="path-icon root">ğŸŒ±</div>
                                <div class="path-content">
                                    <div class="path-label">æ ‘æ ¹ Â· æ·±å±‚éœ€æ±‚</div>
                                    <div class="path-items">${rootItems.slice(0, 4).join('ã€')}${rootItems.length > 4 ? ' ç­‰' + rootItems.length + 'é¡¹' : ''}</div>
                                </div>
                            </div>
                            
                            <div class="path-arrow-down"></div>
                            
                            <div class="path-step">
                                <div class="path-icon soil">ğŸª¨</div>
                                <div class="path-content">
                                    <div class="path-label">åœŸå£¤ Â· æˆé•¿èƒŒæ™¯</div>
                                    <div class="path-items">${soilItems.slice(0, 4).join('ã€')}${soilItems.length > 4 ? ' ç­‰' + soilItems.length + 'é¡¹' : ''}</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="consult-section">
                            <div class="consult-title">ğŸ’¬ æƒ³æ›´æ·±å…¥ç†è§£è‡ªå·±çš„æƒ…ç»ªæ¨¡å¼ï¼Ÿ</div>
                            <div class="consult-content">
                                <div class="qr-placeholder">
                                    <!-- æ›¿æ¢ä¸‹æ–¹imgæ ‡ç­¾çš„srcä¸ºæ‚¨çš„äºŒç»´ç å›¾ç‰‡é“¾æ¥ -->
                                    <img src="https://imgur.com/a/mcaZuxk" alt="å¾®ä¿¡äºŒç»´ç " id="qrCode">
                                </div>
                                <div class="consult-info">
                                    <strong>ä¸€å¯¹ä¸€ä¸“ä¸šæƒ…ç»ªè§£è¯»</strong><br>
                                    å¸®ä½ çœ‹è§æ¨¡å¼èƒŒåçš„çœŸç›¸<br>
                                    æ‰¾åˆ°çœŸæ­£é€‚åˆä½ çš„ç–—æ„ˆè·¯å¾„<br>
                                    <div style="margin-top: 8px; color: #667eea; font-weight: 600;">
                                        ğŸ“± å¾®ä¿¡/ç”µè¯ï¼š13605734411
                                    </div>
                                    <div class="consult-btn">æ‰«ç é¢„çº¦å’¨è¯¢</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-footer-compact">
                            <strong>ä¸æ˜¯ä½ ä¸å¥½ï¼Œæ˜¯ä½ å¤ªåŠªåŠ›æ´»ç€äº†</strong><br>
                            æ¯ä¸€æ¬¡æƒ…ç»ªéƒ½æ˜¯æ±‚æ•‘ï¼Œæ¯ä¸€æ¬¡ååº”éƒ½æ˜¯è‡ªä¿<br>
                            <em>æ„¿ä½ çœ‹æ‡‚è‡ªå·±ï¼Œæ¸©æŸ”å¾…å·±ï¼Œå› ä¸ºä½ å€¼å¾—</em>
                        </div>
                    </div>
                    
                    <div class="btn-group" style="margin-top: 20px">
                        <button class="btn btn-secondary" onclick="location.reload()">ğŸ”„ é‡æ–°å¼€å§‹</button>
                        <button class="btn btn-primary" onclick="alert('è¯·æˆªå›¾ä¿å­˜ä¸Šæ–¹æŠ¥å‘Š')">ğŸ“¸ æˆªå›¾æç¤º</button>
                    </div>
                </div>
            `;
            
            content.innerHTML = html;
            document.getElementById('progressBar').style.display = 'none';
        }

        renderStep();
    </script>
</body>
</html>
